# 不同方式破坏布局

本书的核心内容是如何发现并解决 CSS 问题。但如果我们尝试反向操作呢？在本节中，我们将探讨多种故意破坏 CSS 布局的方法。

## 添加长文本内容

文本超出预期长度是导致布局问题的常见原因。通过随机插入长文本，可以有效发现潜在的 CSS 布局缺陷。

![image-20250325213047635](/img/image-20250325213047635.png)

第一个示例中的文章标题较短，设计师已确保其适配布局。但当开发者基于此实现组件后，插入长文本会导致链接图标意外换行。

在我们假设这是一个错误之前，可以问自己几个问题：

- 这种行为是故意的吗？也就是说，当文本变长时，它应该将其他元素推到新行吗？
- 或者这是意外的，根本不应该发生？

部分 CSS 问题源于设计与开发之间的认知差异。设计师可能未考虑所有使用场景，而开发者也未充分确认组件细节。这类问题需要双方共同承担责任。

### forceFeed.js

幸运的是，存在帮助我们添加随机内容并测试问题的工具。[forceFeed.js](https://github.com/Heydon/forceFeed) 就是其中之一。让我们了解它是如何工作的。

#### 安装

首先，通过 `npm` 或 `bower` 安装它：

```bash
npm install forcefeed
# or
bower install forcefeed
```

或者简单地从 GitHub 存储库下载 JavaScript 文件。

#### 包含脚本

在页面内容之后和 body 元素结束之前包含脚本。

```html
  <script src="path/to/forceFeed.js"></script>
</body>
```

#### 向元素添加属性

向你想要添加随机内容的任何元素添加 `data-forcefeed` 属性。

```html
<div class="person">
  <h3 class="name" data-forcefeed="words|2"></h3>
  <p class="description" data-forcefeed="sentences|3|6">This will be overridden</p>
</div>
```

第一个，`data-forcefeed="words|2"`，将根据定义的数组生成两个随机单词，`data-forcefeed="sentences|3|6"` 将生成三到六个之间的随机句子数。

#### 添加数组

```js
window.words = ['Design', 'Work', 'Awesome', 'Cool'];
window.sentences = [
  'Can you break me?',
  'I love food and baking',
  'How are you today?',
  'When was the last time you saw mom?',
];
```

#### 执行脚本

最后，我们需要让脚本在页面上工作。

```js
forceFeed({ words: window.words, sentences: window.sentences });
```

这样，我们现在可以刷新页面（`Command` 或 `Control` + `R`）来查看内容更改。也许你会注意到一个破损的元素。

## 尝试不同语言的内容

如果你正在开发多语言网站，那么当一些设计组件有不同内容时，样式很可能会被破坏。

![image-20250325213249095](/img/image-20250325213249095.png)

某些英文标题可能设置了特定字距（字符间距）。虽然在英文界面中显示正常，但切换为阿拉伯语（RTL）模式后，文本可能出现错位。这是因为阿拉伯语文字系统不支持字距调整。

当我们假设按钮组件的特定最小大小时，可能会出现另一个错误。当内容被翻译成另一种语言时，它可能看起来不同。

![image-20250325213310756](/img/image-20250325213310756.png)

以 Twitter 为例，"Done" 按钮在英文界面中显示正常，但翻译为阿拉伯语后，由于设置了 `min-width: 40px`，按钮变得过小且不易识别。解决方法是适当增加按钮的最小宽度。

这些与语言相关的错误很重要，不应该被忽略。如果你有兴趣了解更多关于这个问题的信息，我写了一个完整的指南，[RTL Styling 101](https://rtlstyling.com/)。

## 调整浏览器窗口大小

调整浏览器窗口大小是检验布局健壮性的简单方法之一。在这个过程中，往往会暴露出一些平时难以发现的问题。特别值得关注的是介于移动端和桌面端之间的"中间视口尺寸"，我在博客上撰写过[详细分析](https://ishadeed.com/article/in-between/)，下面将重温这些要点。

> 在响应式网页设计中，通常需要为不同屏幕尺寸创建相应布局。典型网页至少应包含移动端（小屏幕）和桌面端（大屏幕）两种布局。然而，我们常常忽略了"中间"视口尺寸的设计，导致某些组件在特定宽度下显得过宽或过窄。

换句话说，当你测试中间设计状态时，你会发现更多问题。相信我，你会发现一些你或团队没有考虑过的有趣问题。

![image-20250325213407658](/img/image-20250325213407658.png)

此处展示的卡片组件在移动端为单列布局，在平板设备上为双列布局。但在中间视口尺寸下，卡片宽度超出最佳阅读范围，影响可读性。这种看似正常的情况，实则需要优化。

测试中间状态重要性的另一个明确例子是以下页脚设计，取自真实项目。

![image-20250325213427906](/img/image-20250325213427906.png)

在中间视口尺寸下，Instagram 社交媒体图标会意外换行。这种不符合设计预期的行为，属于需要修复的问题。

这应该足以说明这样的问题不能被忽略。由于浏览器调整大小的简单技巧，我们可以相当容易地发现它们。

## 避免占位符图像

图像在使网页易于访问和阅读方面发挥重要作用。作为前端开发者，你的工作是为可以处理任何使用的图像的组件提供可靠的结构。例如，你可能正在开发一个具有完美封面图像和伴随文本的英雄部分。

![image-20250325213514475](/img/image-20250325213514475.png)

这类组件很容易出现问题——只需更换图片就能触发。例如，当缺少适当的半透明背景覆盖层时，文字可能因对比度不足而难以阅读。值得注意的是，设计师的原型与最终实现往往存在差异，开发过程中常有调整。

通过更改图像并在它们上尝试不同的样式，我们可以发现隐藏的问题。

图像尺寸控制是另一个关键方面。作为前端开发者，你可能需要为文章、食谱等内容创建通用媒体组件。关键问题是：应规定怎样的图像尺寸标准？是否应对 CMS 中的上传图像尺寸进行限制？

![image-20250325213547667](/img/image-20250325213547667.png)

此处展示了媒体组件的对比：左侧是设计师提供的标准图像，右侧是内容创作者上传的非标准图像。这种不一致性影响用户体验。设计师与开发者应事先确定图像尺寸规范，并指导内容创作者遵循。

如果你对图像大小没有太多控制，那么我建议使用 CSS `object-fit` 和图像的固定高度。这可以保持所有图像在相同高度内而不破坏它们。

```css
.media__thumb {
  height: 220px;
  object-fit: cover;
}
```

## 在 Internet Explorer 中打开

不，这不是玩笑。Internet Explorer 以破坏网站而闻名。如果你的网站需要在 Internet Explorer 中工作，那么你需要考虑你做出的每个 CSS 决定。例如，如果你使用 CSS grid 进行布局，那么建议使用 `flexbox` 或更旧的布局方法（`floats`、`inline-block` 等）添加后备。

## 在纵向和横向方向之间旋转

在更新个人网站的移动菜单时，我发现横竖屏切换常会暴露设计缺陷。即使是简单的设备方向转换，也可能导致问题，特别是当某些元素使用固定或绝对定位时。

![image-20250325213701039](/img/image-20250325213701039.png)

"关闭"按钮是绝对定位并水平居中的。在横向方向上，按钮与导航重叠，这显然不是预期的。在两个方向上测试都很重要。

## 总结

在本章中，我们学习了如何故意破坏布局。接下来，我们将探索浏览器不一致性和实现错误。
